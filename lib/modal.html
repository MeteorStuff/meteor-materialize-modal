<template name="materializeModalContainer">
  {{#if modalOptions}}
    <!--  if modalOptions is null, do not render anything! -->
    {{#with modalOptions}}
      {{> materializeModal }}
    {{/with}}
  {{/if}}
</template>

<template name="materializeModal">
  <div id="materializeModal" class="materialize-modal modal
    {{#if fixedFooter}}modal-fixed-footer{{/if}}
    {{#if bottomSheet}}bottom-sheet{{/if}}
    {{#if fullscreen}}full-screen{{/if}} {{class}}">

    <div class="modal-content">
      <!-- Add a title, if one was defined -->
      {{#if title}}
        <h4 class="modal-title" id="materializeModalLabel">
          {{#if icon}}<i class="material-icons">{{icon}}</i>{{/if}}
          {{{title}}}
        </h4>
      {{/if}}

      <!--  Modal body -->
      <div class="modal-body">
        {{#if bodyTemplate}}
          {{#if isForm}}
            <!--  If this is a form, then we need to embed bodyTemplate into the form template. -->
            {{> Template.dynamic template=materializeModalForm data=this}}
          {{else}}
            <!--  Otherwise, if a bodyTemplate was specified, insert it here. -->
            {{> Template.dynamic template=bodyTemplate data=this}}
          {{/if}}
        {{else}}
          <!-- If no bodyTemplate, render message instead. -->
          {{{message}}}
        {{/if}}
      </div>
    </div>

    <!--  Add in footer, if one was defined -->
    {{> Template.dynamic template=modalFooter data=modalFooterData}}
  </div>
</template>


<template name="materializeModalFooter">
  <div class="modal-footer">
    {{#if submitLabel}}
      <button id="submitButton" type="submit" class="waves-effect btn-flat {{btnSize}}">{{{submitLabel}}}</button>
    {{/if}}
    {{#if closeLabel}}
      <button id="closeButton" class="waves-effect btn-flat {{btnSize}}">{{{closeLabel}}}</button>
    {{/if}}
  </div>
</template>

<!-- Templates to insert into the mainBody above -->

<template name="materializeModalAlert">
  <div class="alert alert-warning">
    <strong id='label'>{{label}}</strong> <span id='message'>{{{message}}}</span>
  </div>
</template>

<template name="materializeModalError">
  <div class="alert alert-danger">
    <h4 id='label'>{{label}}</h4>
    <strong id ='message'>{{message}}</strong>
  </div>
</template>

<template name="materializeModalPrompt">
  <div class="prompt">
    <div class="col s12">
      <div class="row">
        <div class="input-field col s12">
          <input id="prompt-input" class="validate" type="text" placeholder="{{placeholder}}" required autofocus />
          <label for="prompt-input">{{message}}</label>
        </div>
      </div>
    </div>
  </div>
</template>

<template name="materializeModalForm">
  <form id="modalDialogForm" class="{{formClass}}">
    {{> Template.dynamic template=bodyTemplate }}
  </form>
</template>

<template name="materializeModalProgress">
  <div id='progressBar' class="progress progress-striped active">
    <div id="progressBarDisplay" class="bar" style="width: 0%;"></div>
  </div>
  <div id="progressMessage">
    {{message}}
  </div>
</template>

<template name="materializeModalStatus">
  <div id="statusMessage">
    <i class="fa fa-spinner fa-spin fa-2x"></i>
    <span class="room-for-spin" id="progressMessage">{{progressMessage}}</span>
  </div>
</template>

<template name="materializeModalSelect">
  <p><strong>{{message}}</strong></p>
  <select>
    {{#each items}}
      <option value="{{number}}">{{displayName}}</option>
      {{#each childeren}}
        <option value="{{number}}"> &nbsp; {{displayName}}</option>
      {{/each}}
    {{/each}}
  </select>
</template>

<template name="materializeModalLoading">
  <div class='row'>
    <div class='col s4 center-align'>
      <div class="preloader-wrapper big active">
        <div class="spinner-layer spinner-blue-only">
          <div class="circle-clipper left">
            <div class="circle"></div>
          </div><div class="gap-patch">
            <div class="circle"></div>
          </div><div class="circle-clipper right">
            <div class="circle"></div>
          </div>
        </div>
      </div>
    </div>
    <div class='col s8'>
      <strong id='loadingMessage'>{{message}}</strong>
    </div>
  </div>
</template>
